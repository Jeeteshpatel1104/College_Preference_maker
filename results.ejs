<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>College Search Results</title>
</head>

<style>
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            padding: 8px;
            text-align: left;
            border: 1px solid black;
        }
        .rank-container {
            position: relative; /* To position the tooltip */
        }
        .rank-tooltip {
            display: none; /* Hidden by default */
            position: absolute;
            background-color: #fff;
            border: 1px solid #ccc;
            padding: 5px;
            z-index: 10;
            white-space: nowrap;
        }
        .rank-container:hover .rank-tooltip {
            display: block; /* Show tooltip on hover */
        }
    </style>
</head>
<body>
    <h2>Search Results</h2>

    <% if (results && results.length > 0) { %>
        <table>
            <tr>
                <th>S.No</th>
                <th>College Name</th>
                <th>Institute Type</th>
                <th>Branch</th>
                <th>Category</th>
                <th>Round</th>
                <th>Opening Rank</th>
                <th>Closing Rank</th>
            </tr>
            <% results.forEach(function(row, index) { %>
            <tr>
                <td><%= index + 1 %></td>
                <td><%= row.college_name %></td>
                <td><%= row.institute_type %></td>
                <td><%= row.branch %></td>
                <td><%= row.allotted_category %></td>
                <td><%= row.round %></td>
                <td>
                    <div class="rank-container">
                        <%= row.opening_rank_2024 || 'N/A' %>
                        <div class="rank-tooltip">
                            <strong>2024:</strong> <%= row.opening_rank_2024 || 'N/A' %><br>
                            <strong>2023:</strong> <%= row.opening_rank_2023 || 'N/A' %><br>
                            <strong>2022:</strong> <%= row.opening_rank_2022 || 'N/A' %>
                        </div>
                    </div>
                </td>
                <td>
                    <div class="rank-container">
                        <%= row.closing_rank_2024 || 'N/A' %>
                        <div class="rank-tooltip">
                            <strong>2024:</strong> <%= row.closing_rank_2024 || 'N/A' %><br>
                            <strong>2023:</strong> <%= row.closing_rank_2023 || 'N/A' %><br>
                            <strong>2022:</strong> <%= row.closing_rank_2022 || 'N/A' %>
                        </div>
                    </div>
                </td>
            </tr>
            <% }) %>
        </table>

    <% } else { %>
        <p>No colleges found for the given rank and category.</p>
    <% } %>

    <a href="/">Search Again</a>
</body>

